<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Traveller's Library - Guiding Pathways to Tourism Knowledge</title>
    <link rel="stylesheet" href="index.css"><link rel="icon" href="Favicon TTL (Y).ico" type="image/x-icon">
    
</head>

<body>

    <!-- NAVBAR -->
<nav id="navbar">
    <div class="nav-left">
        <div class="logo">
            <a href="index.html">
                <img src="Index Visuals/Navbar/TTL Logo.jfif" alt="Logo">
            </a>
        </div>
        <div class="library-name">
            <h2>THE TRAVELLER'S LIBRARY</h2>
        </div>
    </div>

    <ul class="menu">
        <li><a href="index.html">Home</a></li>
        <li><a href="Webpages/IML625 GP Website/About us.html" target="_blank">Profile</a></li>
        <li class="services-dropdown">
            <a href="#">Services &#9662;</a>
            <ul class="dropdown">
                <li><a href="http://10.125.129.43:8081" target="_blank">OPAC</a></li>
                <li><a href="https://fliphtml5.com/bookcase/mrqbd/" target="_blank">E-Resources</a></li>
                <li><a href="http://10.125.129.122" target="_blank">Institutional Repository</a></li>
                <li><a href="Webpages/Useful Links/Useful Links.html" target="_blank">Useful Links</a></li>
            </ul>
        </li>
        <li><a href="Webpages/Contact Us/Contact Us.html" target="_blank">Contact Us</a></li>
    </ul>
</nav>


    <!-- SECTION 1 : HERO -->
    <section class="section hero" id="section1">
        <div class="hero-content">
            <svg viewBox="0 0 500 240" width="100%" height="100%">

                <!-- Main curve -->
                <path id="curve-main" d="M10,140 Q250,50 490,140" fill="transparent"></path>

                <!-- Sub curve -->
                <path id="curve-sub" d="M30,160 Q250,90 470,160" fill="transparent"></path>

                <!-- Main text with white stroke -->
                <text font-family="Arial" font-size="20" stroke="white" stroke-width="6" fill="none" font-weight="bold">
                    <textPath href="#curve-main" startOffset="50%" text-anchor="middle">
                        WELCOME TO THE TRAVELLER'S LIBRARY
                    </textPath>
                </text>
                <text font-family="Arial" font-size="20" fill="black" font-weight="bold">
                    <textPath href="#curve-main" startOffset="50%" text-anchor="middle">
                        WELCOME TO THE TRAVELLER'S LIBRARY
                    </textPath>
                </text>

                <!-- Sub text with white stroke -->
                <text font-family="Arial" font-size="18" stroke="white" stroke-width="5" fill="none" font-weight="bold">
                    <textPath href="#curve-sub" startOffset="50%" text-anchor="middle">
                        "Guiding Pathways to Tourism Knowledge"
                    </textPath>
                </text>
                <text font-family="Arial" font-size="18" fill="black" font-weight="bold">
                    <textPath href="#curve-sub" startOffset="50%" text-anchor="middle">
                        "Guiding Pathways to Tourism Knowledge"
                    </textPath>
                </text>

                <!-- Functional Search bar (simplified) -->
                <foreignObject x="110" y="180" width="315" height="30">
                    <div xmlns="http://www.w3.org/1999/xhtml" class="search-bar-container">
                        <input type="text" id="searchInput" placeholder="Search in OPAC..." />
                        <button type="button" id="dropdownBtn" onclick="toggleSearchDropdown()">
                            <span id="selectedService">OPAC</span>
                            <span class="arrow">â–¼</span>
                        </button>
                        <button type="button" class="search-btn" onclick="performSearch()">
                            <svg width="15" height="15" viewBox="0 0 15 15">
                                <circle cx="6" cy="6" r="4" stroke="#555" stroke-width="1.5" fill="none"></circle>
                                <line x1="8.5" y1="8.5" x2="12" y2="12" stroke="#555" stroke-width="1.5"></line>
                            </svg>
                        </button>
                    </div>
                </foreignObject>

            </svg>
        </div>
        
        <!-- Search Dropdown Menu (outside SVG for proper positioning) -->
        <div id="searchDropdown" class="search-dropdown-menu">
            <div class="dropdown-item" onclick="selectService('OPAC', 'http://10.125.129.43:8081')">OPAC</div>
            <div class="dropdown-item" onclick="selectService('E-Res.', 'https://fliphtml5.com/bookcase/mrqbd/')">E-Resources</div>
            <div class="dropdown-item" onclick="selectService('Inst. Rep.', 'http://10.125.129.122')">Institutional Repository</div>
        </div>
    </section>

    <!-- SECTION 2 & 3 COMBINED -->
    <section class="section combined-section" id="section2-3">
        
        <!-- LEFT SIDE: SERVICES (2/5) -->
        <div class="services-container">
            <h2 class="section-title" id="h2s3">Our Services</h2>

            <div class="services-grid">

                <div class="service-box">
                    <a href="http://10.125.129.43:8081" target="_blank">
                        <img src="Index Visuals/Section 3/Services Logo/Koha Logo.png" id="opac" alt="OPAC" />
                    </a>
                    <span class="service-title">OPAC</span>
                    <p class="service-desc">Search library materials</p>
                </div>

                <div class="service-box">
                    <a href="https://fliphtml5.com/bookcase/mrqbd/" target="_blank">
                        <img src="Index Visuals/Section 3/Services Logo/E-Resources Logo.png" id="er" alt="E-Resources" />
                    </a>
                    <span class="service-title">E-Resources</span>
                    <p class="service-desc">Digital books collection</p>
                </div>

                <div class="service-box">
                    <a href="http://10.125.129.122" target="_blank">
                        <img src="Index Visuals/Section 3/Services Logo/Institutional Repository Logo.png" id="ir" alt="Institutional Repository" />
                    </a>
                    <span class="service-title">Institutional Repository</span>
                    <p class="service-desc">Academic works archive</p>
                </div>

                <div class="service-box">
                    <a href="Webpages/Useful Links/Useful Links.html" target="_blank">
                        <img src="Index Visuals/Section 3/Services Logo/Useful Links.png" alt="Useful Links" id="ul">
                    </a>
                    <span class="service-title">Useful Links</span>
                    <p class="service-desc">External resources</p>
                </div>

            </div>
        </div>

        <!-- RIGHT SIDE: NEWS (3/5) -->
        <div class="news-container">
            <h2 id="h2s2">News</h2>
            
            <div class="slideshow-container">

                <div class="mySlides">
                    <a href="https://www.untourism.int/news/international-tourist-arrivals-up-4-in-2025-reflecting-strong-travel-demand-around-the-world" 
                    target="_blank"><img src="Index Visuals/Section 2/Slides/S1 - UN Tourism News.png" alt="International tourist arrivals up 4% in 2025 reflecting strong travel demand around the world - UN Tourism"
                    title="International tourist arrivals up 4% in 2025 reflecting strong travel demand around the world - UN Tourism" /></a>
                </div>

                <div class="mySlides">
                    <a href="https://www.tourism-review.com/southeast-asias-tourism-is-mostly-recovered-news15145" target="_blank">
                    <img src="Index Visuals/Section 2/Slides/S2 - Tourism Review News.png" alt="Southeast Asia'S Tourism Industry Renaissance - Tourism Review" title="Southeast Asia'S Tourism Industry Renaissance - Tourism Review" /></a>
                </div>

                <div class="mySlides">
                    <a href="https://www.malaymail.com/news/malaysia/2025/12/18/stats-dept-malaysias-domestic-tourism-hits-216-million-visitors-rm884b-spending/202427"
                    target="_blank"><img src="Index Visuals/Section 2/Slides/S3 - Malay Mail News.png" alt="Stats Dept: Malaysia's domestic tourism hits 216 million visitors, RM88.4b spending - Malay Mail" title="Stats Dept: Malaysia's domestic tourism hits 216 million visitors, RM88.4b spending - Malay Mail" /></a>
                </div>

                <div class="mySlides">
                    <a href="https://www.thestar.com.my/news/nation/2026/01/24/restoring-trust-in-tourism-industry"
                    target="_blank"><img src="Index Visuals/Section 2/Slides/S4 - The Star A1.png" alt="Restoring Trust in tourism industry - The Star" title="Restoring Trust in tourism industry - The Star" /></a>
                </div>
                
                <div class="mySlides">
                    <a href="https://www.thestar.com.my/news/nation/2025/11/13/expanding-tourism-focus-beyond-asean"
                    target="_blank"><img src="Index Visuals/Section 2/Slides/S5 - The Star A2.png" alt="Expanding tourism focus beyond Asean - The Star" title="Expanding tourism focus beyond Asean - The Star" /></a>
                </div>

                <div class="mySlides">
                    <a href="https://www.thestar.com.my/news/nation/2025/11/14/khazanah-invested-over-rm4bil-in-tourism-sites"
                    target="_blank"><img src="Index Visuals/Section 2/Slides/S6 - The Star A3.png" alt="Khazanah invested over RM4bil in tourism sites - The Star" title="Khazanah invested over RM4bil in tourism sites - The Star" /></a>
                </div>

                <div class="mySlides">
                    <a href="https://www.thestar.com.my/lifestyle/travel/2025/02/19/tourism-selangor-forges-strategic-partnerships-to-boost-vsy-2025"
                    target="_blank"><img src="Index Visuals/Section 2/Slides/S7 - The Star A4.png" alt="Tourism Selangor forges strategic partnerships to boost VSY 2025 - The Star" title="Tourism Selangor forges strategic partnerships to boost VSY 2025 - The Star" /></a>
                </div>

                <div class="mySlides">
                    <a href="https://www.bharian.com.my/bisnes/lain-lain/2025/03/1369286/malaysia-pasaran-pelancongan-keempat-paling-lestari-di-asia"
                    target="_blank"><img src="Index Visuals/Section 2/Slides/S8 - BH A1.png" alt="Malaysia pasaran pelancongan keempat paling lestari di Asia - Berita Harian" title="Malaysia pasaran pelancongan keempat paling lestari di Asia - Berita Harian" /></a>
                </div>

                <div class="mySlides">
                    <a href="https://www.bharian.com.my/berita/nasional/2025/09/1451193/malaysia-komited-bangunkan-industri-pelancongan-bertaraf-dunia-pm"
                    target="_blank"><img src="Index Visuals/Section 2/Slides/S9 - BH A2.png" alt="Malaysia komited bangunkan industri pelancongan bertaraf dunia - PM - Berita Harian" title="Malaysia komited bangunkan industri pelancongan bertaraf dunia - PM - Berita Harian" /></a>
                </div>

                <div class="mySlides">
                    <a href="https://www.sinarharian.com.my/article/740944/berita/nasional/malaysia-nombor-satu-dalam-pelancongan-mesra-muslim"
                    target="_blank"><img src="Index Visuals/Section 2/Slides/S10 - Sinar Harian News.png" alt="Malaysia nombor satu dalam Pelancongan Mesra Muslim - Sinar Harian" title="Malaysia nombor satu dalam Pelancongan Mesra Muslim - Berita Harian" /></a>
                </div>

                <div class="mySlides">
                    <a href="https://www.utusan.com.my/terkini/2021/12/langkawi-catat-pendapatan-rm487-juta/"
                    target="_blank"><img src="Index Visuals/Section 2/Slides/S11 - Utusan Malaysia News.png" alt="Langkawi catat pendapatan RM487 juta - Utusan Malaysia" title="Langkawi catat pendapatan RM487 juta - Utusan Malaysia" /></a>
                </div>

                <div class="mySlides">
                    <a href="https://www.tourism.gov.my/media/view/tourism-malaysia-dan-aeon-bekerjasama-dalam-kolaborasi-strategik-promosi-tahun-melawat-malaysia-2026"
                    target="_blank"><img src="Index Visuals/Section 2/Slides/S12 - Tourism Malaysia A1.png" alt="Tourism Malaysia dan AEON Bekerjasama dalam Kolaborasi Strategik Promosi Tahun Melawat Malaysia 2026 - Tourism Malaysia" 
                    title="Tourism Malaysia dan AEON Bekerjasama dalam Kolaborasi Strategik Promosi Tahun Melawat Malaysia 2026 - Tourism Malaysia" /></a>
                </div>

                <div class="mySlides">
                    <a href="https://www.tourism.gov.my/media/view/juneyao-air-launches-inaugural-flight-from-shanghai-to-tawau"
                    target="_blank"><img src="Index Visuals/Section 2/Slides/S13 - Tourism Malaysia A2.png" alt="Juneyao Air Launches Inaugural Flight from Shanghai to Tawau - Tourism Malaysia" 
                    title="Tourism Malaysia dan AEON Bekerjasama dalam Kolaborasi Strategik Promosi Tahun Melawat Malaysia 2026 - Tourism Malaysia" /></a>
                </div>

                <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
                <a class="next" onclick="plusSlides(1)">&#10095;</a>

            </div>
        </div>

    </section>



   <!-- ================= CHATBOT - HYBRID VERSION (FREE & RELIABLE) ================= -->
<!-- Place this code in any HTML page, right before closing </body> tag -->

<!-- CHATBOT STYLES -->
<style>
/* =========================
   CHATBOT (DRAGGABLE & RESIZABLE)
   ========================= */

/* Floating chat button */
.floating-icon {
    position: fixed;
    bottom: 80px;
    right: 30px;
    width: 60px;
    height: 60px;
    background-color: #86cfff;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: move;
    z-index: 999;
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.25);
    transition: transform 0.3s ease;
    user-select: none;
}

.floating-icon:hover {
    transform: scale(1.08);
}

.floating-icon.dragging {
    cursor: grabbing;
    transform: scale(1.1);
}

/* Chat window */
.chat-card {
    position: fixed;
    bottom: 150px;
    right: 30px;
    width: 340px;
    height: 480px;
    min-width: 280px;
    min-height: 350px;
    max-width: 600px;
    max-height: 80vh;
    background-color: #fefcef;
    border-radius: 16px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.35);
    display: flex;
    flex-direction: column;
    overflow: hidden;
    opacity: 0;
    pointer-events: none;
    transform: translateY(20px);
    transition: opacity 0.3s ease, transform 0.3s ease;
    z-index: 1000;
    resize: both;
}

.chat-card.dragging {
    cursor: grabbing;
}

/* Active (opened) state */
.chat-card.active {
    opacity: 1;
    pointer-events: auto;
    transform: translateY(0);
}

/* Header */
.chat-card .header {
    background-color: #86cfff;
    padding: 12px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    cursor: move;
    user-select: none;
}

.chat-card .header:active {
    cursor: grabbing;
}

.header-content {
    display: flex;
    align-items: center;
    gap: 10px;
}

.avatar {
    width: 38px;
    height: 38px;
    background-color: #999ae8;
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
}

.header-info h2 {
    font-size: 16px;
    margin: 0;
    color: #000435;
}

.header-info p {
    font-size: 12px;
    margin: 0;
    color: #000435;
}

.close-btn {
    background: none;
    border: none;
    font-size: 22px;
    cursor: pointer;
    color: #000435;
}

/* Chat body */
.chat-body {
    flex: 1;
    padding: 12px;
    overflow-y: auto;
    background-color: #f0e29a;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

/* Messages */
.msg {
    max-width: 80%;
    padding: 10px 14px;
    border-radius: 14px;
    font-size: 14px;
    line-height: 1.4;
    word-wrap: break-word;
}

.msg.bot {
    background-color: #86cfff;
    align-self: flex-start;
}

.msg.user {
    background-color: #999ae8;
    color: white;
    align-self: flex-end;
}

/* Footer input */
.chat-card .footer {
    display: flex;
    padding: 10px;
    gap: 8px;
    background-color: #fefcef;
    border-top: 2px solid rgba(0, 4, 53, 0.2);
}

.chat-card input {
    flex: 1;
    padding: 8px 12px;
    border-radius: 20px;
    border: 2px solid #7e212a;
    outline: none;
}

.send-btn {
    background-color: #7e212a;
    color: white;
    border: none;
    border-radius: 20px;
    padding: 8px 14px;
    cursor: pointer;
    font-weight: bold;
}

/* Resize handle indicator */
.chat-card::after {
    content: 'â‹°';
    position: absolute;
    bottom: 2px;
    right: 2px;
    font-size: 16px;
    color: #999;
    pointer-events: none;
}

/* Mobile adjustments */
@media screen and (max-width: 500px) {
    .chat-card {
        width: calc(100% - 30px);
        right: 15px;
        bottom: 100px;
        max-height: 70vh;
    }

    .floating-icon {
        right: 15px;
        bottom: 30px;
    }
}
</style>

<!-- CHATBOT HTML -->
<div class="chat-card" id="chatWindow" aria-hidden="true">
    <div class="header" id="chatHeader">
        <div class="header-content">
            <div class="avatar">ðŸ¤–</div>
            <div class="header-info">
                <h2>Chat Support</h2>
                <p>Hi, I'm Sam. How can I help you?</p>
            </div>
        </div>
        <button class="close-btn" onclick="toggleChat()">Ã—</button>
    </div>

    <div class="chat-body" id="chatBody">
        <div class="msg bot">Hello! I'm Sam, your AI assistant for The Traveller's Library. I can help you with information about our services, collections, and resources. What would you like to know?</div>
    </div>

    <div class="footer">
        <input type="text" id="userInput" placeholder="Type a message..." autocomplete="off">
        <button class="send-btn" onclick="sendMessage()">Send</button>
    </div>
</div>

<!-- FLOATING CHAT ICON -->
<div class="floating-icon" id="chatIcon" onclick="toggleChat()" aria-label="Open chat">
    <svg width="35" height="35" viewBox="0 0 24 24" fill="white">
        <path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"/>
        <circle cx="8" cy="9" r="1.5" fill="#86CFFF"/>
        <circle cx="12" cy="9" r="1.5" fill="#86CFFF"/>
        <circle cx="16" cy="9" r="1.5" fill="#86CFFF"/>
    </svg>
</div>

<!-- CHATBOT SCRIPT -->
<script>
/* ==========================
   CHATBOT FUNCTIONALITY
   ========================== */

// Library context - comprehensive knowledge base
const LIBRARY_CONTEXT = `You are Sam, a helpful AI assistant for The Traveller's Library.

ABOUT THE TRAVELLER'S LIBRARY:
The Traveller's Library is a specialized library in Malaysia focused on tourism, hospitality, and travel-related resources. Our mission is "Guiding Pathways to Tourism Knowledge." We serve students, researchers, and professionals in the tourism industry.

OUR SERVICES:

1. OPAC (Online Public Access Catalog)
   URL: http://10.125.129.43:8081
   - Search our physical book collection
   - Koha-based library management system
   - Browse books, journals, and materials
   - Find tourism and hospitality resources

2. E-Resources
   URL: https://fliphtml5.com/bookcase/mrqbd/
   - Digital collection of electronic books
   - Tourism and hospitality e-books
   - Available 24/7 online
   - Accessible from anywhere

3. Institutional Repository
   URL: http://10.125.129.122
   - Archive of academic works and research
   - Theses and dissertations
   - Research papers on tourism
   - Scholarly publications

4. Useful Links
   - Curated external tourism resources
   - Industry websites and databases
   - Tourism organizations
   - Research tools and references

CONTACT INFORMATION:
Email: searah2024@gmail.com
Facebook: https://www.facebook.com/share/181qiN9eAF/?mibextid=wwXIfr
Instagram: @travellers_library (https://www.instagram.com/travellers_library)

TEAM & ABOUT US:
This is a group project under IML625 course. The library portal was created to provide comprehensive tourism knowledge and resources to the academic community and tourism professionals.

COLLECTIONS:
- Tourism management books and journals
- Hospitality industry resources
- Travel and destination marketing materials
- Sustainable tourism publications
- Tourism research papers and theses
- Digital tourism resources

HOW TO HELP USERS:
- Answer questions about library services
- Direct users to appropriate resources (OPAC, E-Resources, Repository)
- Explain how to search for materials
- Provide tourism-related information
- Share contact details when needed
- Be friendly, professional, and helpful

When users ask about:
- Books/physical materials â†’ Direct to OPAC
- E-books/digital resources â†’ Direct to E-Resources
- Research papers/theses â†’ Direct to Institutional Repository
- External resources â†’ Mention Useful Links
- Contact/help â†’ Provide email and social media

Always be concise (2-4 sentences), helpful, and include relevant URLs when directing to services.`;

// Comprehensive fallback knowledge base
const KNOWLEDGE_BASE = {
    about: {
        keywords: ['what is', 'about', 'tell me about', 'describe', 'explain', 'who are you', 'library', 'mission', 'purpose'],
        responses: [
            "The Traveller's Library is a specialized library focused on tourism, hospitality, and travel resources in Malaysia. Our mission is 'Guiding Pathways to Tourism Knowledge.' We serve students, researchers, and tourism professionals with comprehensive resources including books, e-books, and research papers.",
            "We're The Traveller's Library - your gateway to tourism knowledge! We specialize in tourism, hospitality, and travel information, offering physical books via OPAC, digital resources through E-Resources, and academic papers in our Institutional Repository. This is a group project under IML625."
        ]
    },
    
    services: {
        keywords: ['service', 'offer', 'provide', 'available', 'what can', 'what do you', 'features', 'facilities', 'main service'],
        responses: [
            "We offer 4 main services:\n\n1ï¸âƒ£ OPAC (http://10.125.129.43:8081) - Search physical books\n2ï¸âƒ£ E-Resources (https://fliphtml5.com/bookcase/mrqbd/) - Access digital books 24/7\n3ï¸âƒ£ Institutional Repository (http://10.125.129.122) - Browse research papers\n4ï¸âƒ£ Useful Links - Explore curated tourism resources\n\nWhich interests you?",
            "Our library provides comprehensive services: OPAC for searching our physical catalog, E-Resources for digital books available anytime, an Institutional Repository for academic research, and Useful Links for external tourism resources. All focused on tourism and hospitality! What would you like to explore?"
        ]
    },
    
    opac: {
        keywords: ['opac', 'book', 'catalog', 'catalogue', 'physical', 'borrow', 'search book', 'find book', 'koha', 'library catalog', 'printed book'],
        responses: [
            "Search for books using our OPAC at http://10.125.129.43:8081 ðŸ“š\n\nOur Koha-based system lets you browse our entire collection of physical materials including books, journals, and tourism resources. You can search by title, author, subject, or keyword!",
            "Our OPAC (Online Public Access Catalog) is at http://10.125.129.43:8081. It's your gateway to discovering all our physical books and materials on tourism, hospitality, and travel. The system is easy to use - just search for what you need!"
        ]
    },
    
    eresources: {
        keywords: ['ebook', 'e-book', 'e-resource', 'digital', 'online book', 'electronic', 'pdf', 'download', 'virtual', 'digital book', 'online resource'],
        responses: [
            "Access our E-Resources collection 24/7 at https://fliphtml5.com/bookcase/mrqbd/ ðŸ’»\n\nWe have digital books on tourism and hospitality that you can access anytime, anywhere - perfect for online research and study!",
            "Our digital library is available at https://fliphtml5.com/bookcase/mrqbd/ with e-books on tourism, hospitality, and travel. These resources are accessible around the clock, so you can study whenever it suits you!"
        ]
    },
    
    repository: {
        keywords: ['repository', 'research', 'paper', 'thesis', 'dissertation', 'academic', 'publication', 'journal', 'scholarly', 'study', 'research paper'],
        responses: [
            "Visit our Institutional Repository at http://10.125.129.122 ðŸ“„\n\nIt contains academic works including research papers, theses, and dissertations focused on tourism. Excellent for researchers and students working on tourism projects!",
            "Our Institutional Repository (http://10.125.129.122) archives scholarly publications, research papers, and academic theses related to tourism and hospitality. It's a valuable collection for serious research work!"
        ]
    },
    
    links: {
        keywords: ['useful link', 'external', 'website', 'other resource', 'link', 'outside', 'web', 'external resource', 'other site'],
        responses: [
            "Our Useful Links section provides curated external resources including tourism organizations, databases, industry websites, and research tools. These carefully selected links complement our collections with additional tourism knowledge sources.",
            "We maintain a collection of Useful Links to external tourism resources - databases, industry websites, tourism organizations, and government resources. These enhance your research with additional specialized sources!"
        ]
    },
    
    tourism: {
        keywords: ['tourism', 'travel', 'hospitality', 'hotel', 'destination', 'tourist', 'vacation', 'industry', 'tourism industry'],
        responses: [
            "As a tourism-focused library, we specialize in tourism management, hospitality, travel industry, destination marketing, sustainable tourism, and more. Our collections support research across all aspects of tourism - accessible via OPAC, E-Resources, and our Repository!",
            "We're dedicated to tourism resources! Whether you're studying tourism management, researching travel trends, exploring hospitality operations, or investigating sustainable tourism, we have materials across all our services to support your work."
        ]
    },
    
    contact: {
        keywords: ['contact', 'email', 'reach', 'get in touch', 'message', 'phone', 'address', 'location', 'facebook', 'instagram', 'social media', 'how to contact'],
        responses: [
            "Contact us:\nðŸ“§ Email: searah2024@gmail.com\nðŸ“˜ Facebook: https://www.facebook.com/share/181qiN9eAF/\nðŸ“· Instagram: @travellers_library\n\nFeel free to reach out with any questions!",
            "Get in touch:\nâ€¢ Email: searah2024@gmail.com\nâ€¢ Facebook: https://www.facebook.com/share/181qiN9eAF/?mibextid=wwXIfr\nâ€¢ Instagram: https://www.instagram.com/travellers_library\n\nWe're here to help!"
        ]
    },
    
    help: {
        keywords: ['how to', 'how do i', 'help', 'guide', 'tutorial', 'instruction', 'use', 'access', 'start', 'begin', 'need help'],
        responses: [
            "Here's how to use our services:\nðŸ“š Books â†’ OPAC: http://10.125.129.43:8081\nðŸ’» E-books â†’ E-Resources: https://fliphtml5.com/bookcase/mrqbd/\nðŸ“„ Research â†’ Repository: http://10.125.129.122\nðŸ”— External â†’ Useful Links section\n\nWhat would you like to explore?",
            "I can guide you! Looking for:\nâ€¢ Physical books? â†’ Use OPAC\nâ€¢ Digital resources? â†’ Try E-Resources\nâ€¢ Academic papers? â†’ Visit our Repository\nâ€¢ External sites? â†’ Check Useful Links\n\nWhat interests you?"
        ]
    },
    
    hours: {
        keywords: ['hour', 'open', 'close', 'time', 'when', 'available', 'access time', 'operating', 'opening hour', 'schedule'],
        responses: [
            "Our digital services (E-Resources at https://fliphtml5.com/bookcase/mrqbd/ and Institutional Repository at http://10.125.129.122) are available 24/7! For physical library hours and OPAC access times, please contact us at searah2024@gmail.com.",
            "E-Resources and our Repository are accessible 24/7 online! For information about physical library operating hours, reach out to searah2024@gmail.com or check our Facebook page."
        ]
    },
    
    collection: {
        keywords: ['collection', 'material', 'have', 'find', 'looking for', 'resource', 'database', 'what do you have'],
        responses: [
            "Our collection includes tourism books, hospitality journals, travel guides, research papers, e-books, and academic publications. Search via:\nâ€¢ OPAC for physical items\nâ€¢ E-Resources for digital materials\nâ€¢ Repository for academic works\n\nWhat topic are you researching?",
            "We have extensive tourism and hospitality collections: books, journals, e-books, research papers, and theses. These are accessible through OPAC (http://10.125.129.43:8081), E-Resources (https://fliphtml5.com/bookcase/mrqbd/), and our Repository. What subject interests you?"
        ]
    },
    
    search: {
        keywords: ['search', 'find', 'look for', 'looking', 'where can i find', 'how to find', 'locate'],
        responses: [
            "To search our resources:\n1. Physical books â†’ OPAC: http://10.125.129.43:8081\n2. Digital books â†’ E-Resources: https://fliphtml5.com/bookcase/mrqbd/\n3. Research papers â†’ Repository: http://10.125.129.122\n\nWhat type of material are you looking for?",
            "You can search different ways:\nâ€¢ OPAC for physical books and materials\nâ€¢ E-Resources for digital/online books\nâ€¢ Institutional Repository for academic research\n\nTell me what you need and I'll point you in the right direction!"
        ]
    },
    
    team: {
        keywords: ['team', 'staff', 'who made', 'developer', 'creator', 'built', 'iml625', 'group project', 'student'],
        responses: [
            "The Traveller's Library is a group project under the IML625 course. It was developed by a team of students to provide comprehensive tourism knowledge resources to the academic community. For more details, visit our About Us page or contact us at searah2024@gmail.com!",
            "This library portal is a collaborative group project for the IML625 course! Our team worked to create this specialized tourism resource center. You can learn more by visiting our About Us page or reaching out at searah2024@gmail.com."
        ]
    },
    
    greeting: {
        keywords: ['hello', 'hi', 'hey', 'good morning', 'good afternoon', 'good evening', 'greetings', 'hola', 'howdy'],
        responses: [
            "Hello! ðŸ‘‹ I'm Sam, your assistant at The Traveller's Library. I can help you find books, e-resources, research papers, and answer questions about our tourism collections. What can I help you with today?",
            "Hi there! Welcome to The Traveller's Library! I'm Sam, and I can guide you through our OPAC, E-Resources, Institutional Repository, and more. How may I assist you?",
            "Hey! I'm Sam from The Traveller's Library. Whether you need books, e-books, research papers, or just have questions about our tourism resources, I'm here to help! What would you like to know?"
        ]
    },
    
    thanks: {
        keywords: ['thank', 'thanks', 'appreciate', 'helpful', 'great', 'awesome', 'good job', 'perfect'],
        responses: [
            "You're very welcome! ðŸ˜Š If you need anything else about our library services or tourism resources, feel free to ask. Happy researching!",
            "My pleasure! Don't hesitate to ask if you have more questions about The Traveller's Library. Enjoy exploring our resources!",
            "Glad I could help! Come back anytime you need assistance with books, e-resources, or research. Good luck with your tourism studies! ðŸ“š"
        ]
    },
    
    goodbye: {
        keywords: ['bye', 'goodbye', 'see you', 'later', 'take care', 'gotta go', 'leave'],
        responses: [
            "Goodbye! ðŸ‘‹ Come back anytime you need help with The Traveller's Library resources. Happy travels in your research journey!",
            "Take care! Feel free to return whenever you need assistance. Good luck with your tourism research!",
            "See you later! Remember, we're here 24/7 for digital resources. Visit us again soon! ðŸŒ"
        ]
    }
};

// Find best matching response from knowledge base
function findFallbackResponse(userText) {
    const text = userText.toLowerCase();
    let bestMatch = null;
    let maxMatches = 0;
    
    for (const [category, data] of Object.entries(KNOWLEDGE_BASE)) {
        let matches = 0;
        for (const keyword of data.keywords) {
            if (text.includes(keyword)) {
                matches++;
            }
        }
        
        if (matches > maxMatches) {
            maxMatches = matches;
            bestMatch = category;
        }
    }
    
    if (bestMatch && maxMatches > 0) {
        const responses = KNOWLEDGE_BASE[bestMatch].responses;
        return responses[Math.floor(Math.random() * responses.length)];
    }
    
    return null;
}

// Try AI response with Hugging Face (free, no API key needed for some models)
async function getAIResponse(userText) {
    try {
        const prompt = `${LIBRARY_CONTEXT}\n\nUser question: ${userText}\n\nRespond as Sam in 2-4 sentences. Be helpful and include relevant URLs when directing to services:`;
        
        // Using free Hugging Face Inference API
        const response = await fetch(
            "https://api-inference.huggingface.co/models/microsoft/DialoGPT-large",
            {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify({
                    inputs: prompt,
                    parameters: {
                        max_length: 200,
                        temperature: 0.7,
                        return_full_text: false
                    }
                })
            }
        );

        if (response.ok) {
            const data = await response.json();
            if (data && data[0] && data[0].generated_text) {
                return data[0].generated_text.trim();
            }
        }
    } catch (error) {
        console.log("AI service unavailable, using fallback:", error);
    }
    
    return null;
}

// Draggable functionality for floating icon
let isDraggingIcon = false;
let iconOffsetX = 0;
let iconOffsetY = 0;

const floatingIcon = document.getElementById('chatIcon');

floatingIcon.addEventListener('mousedown', function(e) {
    if (e.button === 2) return;
    isDraggingIcon = true;
    floatingIcon.classList.add('dragging');
    iconOffsetX = e.clientX - floatingIcon.getBoundingClientRect().left;
    iconOffsetY = e.clientY - floatingIcon.getBoundingClientRect().top;
    e.preventDefault();
});

document.addEventListener('mousemove', function(e) {
    if (isDraggingIcon) {
        const x = e.clientX - iconOffsetX;
        const y = e.clientY - iconOffsetY;
        
        const maxX = window.innerWidth - floatingIcon.offsetWidth;
        const maxY = window.innerHeight - floatingIcon.offsetHeight;
        
        floatingIcon.style.left = Math.max(0, Math.min(x, maxX)) + 'px';
        floatingIcon.style.top = Math.max(0, Math.min(y, maxY)) + 'px';
        floatingIcon.style.right = 'auto';
        floatingIcon.style.bottom = 'auto';
    }
});

document.addEventListener('mouseup', function() {
    if (isDraggingIcon) {
        isDraggingIcon = false;
        floatingIcon.classList.remove('dragging');
    }
});

// Draggable functionality for chat window
let isDraggingChat = false;
let chatOffsetX = 0;
let chatOffsetY = 0;

const chatWindow = document.getElementById('chatWindow');
const chatHeader = document.getElementById('chatHeader');

chatHeader.addEventListener('mousedown', function(e) {
    if (e.target.classList.contains('close-btn')) return;
    isDraggingChat = true;
    chatWindow.classList.add('dragging');
    chatOffsetX = e.clientX - chatWindow.getBoundingClientRect().left;
    chatOffsetY = e.clientY - chatWindow.getBoundingClientRect().top;
    e.preventDefault();
});

document.addEventListener('mousemove', function(e) {
    if (isDraggingChat) {
        const x = e.clientX - chatOffsetX;
        const y = e.clientY - chatOffsetY;
        
        const maxX = window.innerWidth - chatWindow.offsetWidth;
        const maxY = window.innerHeight - chatWindow.offsetHeight;
        
        chatWindow.style.left = Math.max(0, Math.min(x, maxX)) + 'px';
        chatWindow.style.top = Math.max(0, Math.min(y, maxY)) + 'px';
        chatWindow.style.right = 'auto';
        chatWindow.style.bottom = 'auto';
    }
});

document.addEventListener('mouseup', function() {
    if (isDraggingChat) {
        isDraggingChat = false;
        chatWindow.classList.remove('dragging');
    }
});

// Chat toggle
function toggleChat() {
    if (isDraggingIcon) return;
    const chatWindow = document.getElementById('chatWindow');
    chatWindow.classList.toggle('active');
    chatWindow.setAttribute(
        'aria-hidden',
        !chatWindow.classList.contains('active')
    );
}

// Send message - hybrid approach
async function sendMessage() {
    const input = document.getElementById('userInput');
    const chatBody = document.getElementById('chatBody');
    const userText = input.value.trim();

    if (userText === "") return;

    // User bubble
    const userDiv = document.createElement('div');
    userDiv.className = 'msg user';
    userDiv.textContent = userText;
    chatBody.appendChild(userDiv);

    input.value = "";
    chatBody.scrollTop = chatBody.scrollHeight;

    // Typing indicator
    const botDiv = document.createElement('div');
    botDiv.className = 'msg bot';
    botDiv.textContent = "Sam is typing...";
    chatBody.appendChild(botDiv);
    chatBody.scrollTop = chatBody.scrollHeight;

    // First, check for instant fallback response
    const fallbackResponse = findFallbackResponse(userText);
    
    if (fallbackResponse) {
        // Use fallback immediately for known questions
        setTimeout(() => {
            botDiv.textContent = fallbackResponse;
            chatBody.scrollTop = chatBody.scrollHeight;
        }, 300);
    } else {
        // Try AI for unknown questions, fallback if it fails
        const aiResponse = await getAIResponse(userText);
        
        setTimeout(() => {
            if (aiResponse && aiResponse.length > 10) {
                botDiv.textContent = aiResponse;
            } else {
                // Ultimate fallback
                botDiv.textContent = "I'm here to help with The Traveller's Library! You can ask me about:\nâ€¢ Our services (OPAC, E-Resources, Repository)\nâ€¢ How to find books or e-books\nâ€¢ Research papers and resources\nâ€¢ Tourism collections\nâ€¢ Contact information\n\nWhat would you like to know?";
            }
            chatBody.scrollTop = chatBody.scrollHeight;
        }, 500);
    }
}

// Enter key support
document.addEventListener("DOMContentLoaded", () => {
    const input = document.getElementById("userInput");
    if (input) {
        input.addEventListener("keypress", (e) => {
            if (e.key === "Enter") sendMessage();
        });
    }
});

// Touch support for mobile
floatingIcon.addEventListener('touchstart', function(e) {
    isDraggingIcon = true;
    floatingIcon.classList.add('dragging');
    const touch = e.touches[0];
    iconOffsetX = touch.clientX - floatingIcon.getBoundingClientRect().left;
    iconOffsetY = touch.clientY - floatingIcon.getBoundingClientRect().top;
    e.preventDefault();
});

document.addEventListener('touchmove', function(e) {
    if (isDraggingIcon) {
        const touch = e.touches[0];
        const x = touch.clientX - iconOffsetX;
        const y = touch.clientY - iconOffsetY;
        
        const maxX = window.innerWidth - floatingIcon.offsetWidth;
        const maxY = window.innerHeight - floatingIcon.offsetHeight;
        
        floatingIcon.style.left = Math.max(0, Math.min(x, maxX)) + 'px';
        floatingIcon.style.top = Math.max(0, Math.min(y, maxY)) + 'px';
        floatingIcon.style.right = 'auto';
        floatingIcon.style.bottom = 'auto';
    }
});

document.addEventListener('touchend', function() {
    if (isDraggingIcon) {
        isDraggingIcon = false;
        floatingIcon.classList.remove('dragging');
    }
});

chatHeader.addEventListener('touchstart', function(e) {
    if (e.target.classList.contains('close-btn')) return;
    isDraggingChat = true;
    chatWindow.classList.add('dragging');
    const touch = e.touches[0];
    chatOffsetX = touch.clientX - chatWindow.getBoundingClientRect().left;
    chatOffsetY = touch.clientY - chatWindow.getBoundingClientRect().top;
    e.preventDefault();
});

document.addEventListener('touchmove', function(e) {
    if (isDraggingChat) {
        const touch = e.touches[0];
        const x = touch.clientX - chatOffsetX;
        const y = touch.clientY - chatOffsetY;
        
        const maxX = window.innerWidth - chatWindow.offsetWidth;
        const maxY = window.innerHeight - chatWindow.offsetHeight;
        
        chatWindow.style.left = Math.max(0, Math.min(x, maxX)) + 'px';
        chatWindow.style.top = Math.max(0, Math.min(y, maxY)) + 'px';
        chatWindow.style.right = 'auto';
        chatWindow.style.bottom = 'auto';
    }
});

document.addEventListener('touchend', function() {
    if (isDraggingChat) {
        isDraggingChat = false;
        chatWindow.classList.remove('dragging');
    }
});
</script>



    
    <!-- FOOTER -->
    <footer>
        <div class="footer-container">

            <div class="footer-left">
                Â© The Traveller's Library, 2026. This library portal is to complete a group project under IML625.
            </div>

            <a href="https://www.freecounterstat.com" title="visitors counter"><img src="https://counter1.optistats.ovh/private/freecounterstat.php?c=5s3ct8llmes886ydn3b3tu4n39cdpfq2" 
                border="0" title="visitors counter" alt="visitors counter"></a>

            <div class="footer-right">
                <a href="https://www.facebook.com/share/181qiN9eAF/?mibextid=wwXIfr" target="_blank"><img src="Index Visuals/Footer/SocMed Logo/Facebook Logo.png" alt="Facebook" /></a>
                <a href="https://www.instagram.com/travellers_library?igsh=ajk1NGNwa2ZhZjgz&utm_source=qr" target="_blank"><img src="Index Visuals/Footer/SocMed Logo/Instagram Logo.jfif" alt="Instagram" /></a>
                <a href="mailto:searah2024@gmail.com"><img src="Index Visuals/Footer/SocMed Logo/Gmail.jfif" alt="Gmail" /></a>
                <a href="#"><img src="Index Visuals/Footer/Top Arrow.webp" id="footerimg" alt="Back to top" /></a>
            </div>

        </div>
    </footer>

<script>
// Search dropdown functionality
let selectedServiceUrl = 'http://10.125.129.43:8081'; // Default to OPAC

function toggleSearchDropdown() {
    const dropdown = document.getElementById('searchDropdown');
    dropdown.classList.toggle('show');
}

function selectService(name, url) {
    document.getElementById('selectedService').textContent = name;
    selectedServiceUrl = url;
    document.getElementById('searchDropdown').classList.remove('show');
    
    // Update placeholder based on selected service
    const searchInput = document.getElementById('searchInput');
    searchInput.placeholder = `Search in ${name}...`;
}

// Close dropdown when clicking outside
document.addEventListener('click', function(event) {
    const dropdown = document.getElementById('searchDropdown');
    const dropdownBtn = document.getElementById('dropdownBtn');
    
    if (dropdown && dropdownBtn && 
        !dropdown.contains(event.target) && 
        !dropdownBtn.contains(event.target)) {
        dropdown.classList.remove('show');
    }
});

// Search functionality
function performSearch() {
    const searchInput = document.getElementById('searchInput').value.toLowerCase().trim();
    
    // Open the selected service URL (with search query if the service supports it)
    if (selectedServiceUrl) {
        // For OPAC (Koha), you can append search query
        if (selectedServiceUrl.includes('8081')) {
            // Koha search URL format
            window.open(`${selectedServiceUrl}/cgi-bin/koha/opac-search.pl?q=${encodeURIComponent(searchInput)}`, '_blank');
        } else {
            // For other services, just open the URL
            window.open(selectedServiceUrl, '_blank');
        }
    } else {
        alert('Please select a service to search');
    }
}

// Allow Enter key to trigger search
document.addEventListener('DOMContentLoaded', function() {
    const searchInput = document.getElementById('searchInput');
    if (searchInput) {
        searchInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                performSearch();
            }
        });
    }
});

// Slideshow functionality
let slideIndex = 1;
let slideDirection = 1;
let isAnimating = false;
showSlides(slideIndex, false);

function plusSlides(n) {
    if (isAnimating) return;
    isAnimating = true;
    
    let slides = document.getElementsByClassName("mySlides");
    let currentSlide = slideIndex - 1;
    let nextIndex = slideIndex + n;
    
    if (nextIndex > slides.length) { nextIndex = 1; }
    if (nextIndex < 1) { nextIndex = slides.length; }
    let nextSlide = nextIndex - 1;
    
    slideDirection = n;
    
    // Animate out current slide
    if (slideDirection > 0) {
        slides[currentSlide].classList.add('slide-out-left');
    } else {
        slides[currentSlide].classList.add('slide-out-right');
    }
    
    // Show and animate in next slide
    slides[nextSlide].style.display = "block";
    if (slideDirection > 0) {
        slides[nextSlide].classList.add('slide-in-right');
    } else {
        slides[nextSlide].classList.add('slide-in-left');
    }
    
    slideIndex = nextIndex;
    
    setTimeout(() => {
        slides[currentSlide].style.display = "none";
        slides[currentSlide].classList.remove('slide-out-left', 'slide-out-right');
        slides[nextSlide].classList.remove('slide-in-left', 'slide-in-right');
        isAnimating = false;
    }, 1500);
}

function showSlides(n, animate = true) {
    let slides = document.getElementsByClassName("mySlides");
    if (n > slides.length) { slideIndex = 1 }
    if (n < 1) { slideIndex = slides.length }
    
    for (let i = 0; i < slides.length; i++) { 
        slides[i].style.display = "none"; 
    }
    
    slides[slideIndex - 1].style.display = "block";
}

// Intersection Observer for section animations
const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px'
};

const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (entry.isIntersecting && entry.target.classList.contains('section')) {
            entry.target.classList.add('animate-in');
        }
    });
}, observerOptions);

// Observe only sections, not navbar or footer
document.querySelectorAll('.section').forEach(section => {
    observer.observe(section);
});
</script>



</body>
</html>
