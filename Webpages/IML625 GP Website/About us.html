<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Profile - The Traveller's Library</title>
<link rel="stylesheet" href="About Us.css"><link rel="icon" href="../../Favicon TTL (Y).ico" type="image/x-icon">
</head>

<body>

<!-- NAVBAR -->
<nav id="navbar">
    <div class="nav-left">
        <div class="logo">
            <a href="../../index.html" target="_blank">
                <img src="../../Index Visuals/Navbar/TTL Logo.jfif" alt="Logo">
            </a>
        </div>
        <div class="library-name">
            <h2>THE TRAVELLER'S LIBRARY</h2>
        </div>
    </div>

    <ul class="menu">
        <li><a href="../../index.html" target="_blank">Home</a></li>
        <li><a href="../IML625 GP Website/About us.html">Profile</a></li>

        <li class="services-dropdown">
            <a href="#">Services &#9662;</a>
            <ul class="dropdown">
                <li><a href="http://10.145.112.43:8081" target="_blank">OPAC</a></li>
                <li><a href="https://fliphtml5.com/bookcase/mrqbd/" target="_blank">E-Resources</a></li>
                <li><a href="http://10.145.112.122" target="_blank">Institutional Repository</a></li>
                <li><a href="../Useful Links/Useful Links.html" target="_blank">Useful Links</a></li>
            </ul>
        </li>

        <li><a href="../Contact Us/Contact Us.html" target="_blank">Contact Us</a></li>
    </ul>
</nav>


<!-- ABOUT US -->
<section class="about-us-section">
<div class="container">

<section id="about-us" class="section">
    <h2 class="section-title">About Us</h2>

    <!-- Accordion 1: Who We Are -->
    <div class="accordion-container">
        <button class="accordion">Who We Are <span class="arrow">&#9662;</span></button>
        <div class="accordion-content">
            <p>
                The Traveller's Library is a specialized digital information portal designed to support 
                learning, research, and awareness in the field of tourism. The library focuses on both 
                local and international tourism, providing access to curated resources that highlight 
                tourism development, industry trends, cultural heritage, and sustainable practices. It 
                serves as a knowledge hub for students, educators, and the wider community with an interest 
                in tourism studies. Our business times:
            </p>
            <ul style="padding: 15px;">
                <li>Monday: Closed</li>
                <li>Tuesday - Sunday: 0900 - 1700</li>
                <li>Closed during public holidays</li>
            </ul>
        </div>
    </div>

    <!-- Accordion 2: Vision -->
    <div class="accordion-container">
        <button class="accordion">Vision <span class="arrow">&#9662;</span></button>
        <div class="accordion-content">
            <p>
                To become a trusted digital tourism information hub that connects users to reliable, 
                comprehensive, and up-to-date tourism knowledge at both local and global levels.
            </p>
        </div>
    </div>

    <!-- Accordion 3: Mission -->
    <div class="accordion-container">
        <button class="accordion">Mission <span class="arrow">&#9662;</span></button>
        <div class="accordion-content">
            <p>
                To provide accessible and well-organized tourism-related information resources through digital 
                platforms, supporting academic learning, research activities, and informed understanding of the 
                tourism industry.
            </p>
        </div>
    </div>

    <!-- Accordion 4: Objectives -->
    <div class="accordion-container">
        <button class="accordion">Objectives <span class="arrow">&#9662;</span></button>
        <div class="accordion-content">
            <ul style="padding: 15px;">
                <li>Provide comprehensive access to tourism information through OPAC, e-resources, and institutional repository.</li>
                <li>Support learning and research in tourism studies with credible, relevant sources.</li>
                <li>Promote awareness of local and international tourism developments, trends, and best practices.</li>
                <li>Encourage information literacy and effective use of digital library services among users.</li>
            </ul>
        </div>
    </div>

    <!-- Accordion 5: FAQ and Further Information -->
    <div class="accordion-container">
        <button class="accordion">Further Information<span class="arrow">&#9662;</span></button>
        <div class="accordion-content">
            <ol style="padding: 15px;">
                <li>What is The Traveller's Library?</li>
                <ul style="padding-left: 25px;"><li>The Traveller Library is a tourism-focused digital library that provides access to travel, tourism, and 
                    hospitality-related information and resources.</li></ul>
                
                <li>Who can use The Traveller's Library?</li>
                <ul style="padding-left: 25px;"><li>The library is open to students, researchers, and members of the public who are interested 
                    in travel and tourism knowledge.</li></ul>

                <li>What types of resources are available?</li>
                <ul style="padding-left: 25px;"><li>The library offers books, travel guides, academic articles, journals, research papers, and 
                    curated external travel resources.</li></ul>

                <li>How do I find books or materials?</li>
                <ul style="padding-left: 25px;"><li>You can search for materials using the Online Public Access Catalogue (OPAC), which allows 
                    searching by title, author, or subject.</li></ul>
                
                <li>What are e-resources?</li>
                <ul style="padding-left: 25px;"><li>E-resources are digital materials such as e-books, online journals, and databases that can 
                    be accessed through the library portal.</li></ul>

                <li>What is the Institutional Repository (IR)?</li>
                <ul style="padding-left: 25px;"><li>The Institutional Repository contains academic works such as theses, dissertations, and 
                    research papers related to tourism and travel studies.</li></ul>

                <li>Where can I find recommended travel websites?</li>
                <ul style="padding-left: 25px;"><li>A list of trusted travel and tourism websites is available on the Useful Links page.</li></ul>

                <li>Do I need an account to use the library?</li>
                <ul style="padding-left: 25px;"><li>Some resources are freely accessible, while others may require login depending on system or provider 
                    requirements.</li></ul>

                <li>Can I access the library anytime?</li>
                <ul style="padding-left: 25px;"><li>Yes, the digital library portal can be accessed online at any time, subject to system availability.</li></ul>

                <li>How can I get help?</li>
                <ul style="padding-left: 25px;"><li>You may use the library chatbot or visit the Contact Us page to reach the library team.</li></ul>

                <li>Where can I find the library's policies?</li>
                <ul style="padding-left: 25px;">
                    <li>You can get them here: <a href="https://drive.google.com/file/d/1WsO78ptzflxi_B2XFydqBbBbvTDzzapk/view?usp=sharing" 
                        download="filename" target="_blank">Terms of Service</a> and
                        <a href="https://drive.google.com/file/d/1p1B3q115AJZ6Vqa3G8ffC2I_1RZ8o_Mg/view?usp=sharing" 
                        download="filename" target="_blank">Privacy Policies</a></li></ul>.

            </ol>
        </div>
    </div>

</section>


<h2 class="team-title">Our Team</h2>

<!-- OPAC & IR -->
<div class="team-section">
    <div class="team-photo">
        <img src="Staff Pic/OPAC and IR.png" alt="OPAC & IR Team">
    </div>
    <div class="staff-vertical">
        <div class="team-member small">
            <img src="Staff Pic/1. Irfan.png">
            <h4>Muhamamd Irfan bin Masuri</h4>
            <p>Institutional Repository (IR) Manager</p>
        </div>
        <div class="team-member small">
            <img src="Staff Pic/2. Amy.png">
            <h4>Amy Alia binti Suhaimi</h4>
            <p>Online Public Access Catalog (OPAC) Manager</p>
        </div>
    </div>
</div>

<!-- WEBSITE TEAM (REDONE) -->
<div class="team-section">
    <div class="team-photo">
        <img src="Staff Pic/Website.png" alt="Website Team">
    </div>
    <div class="staff-grid">
        <div class="team-member small">
            <img src="Staff Pic/3. Hafiz.png">
            <h4>Mohammad Hafiz Irfan bin Sharizal</h4>
            <p>Website Manager</p>
        </div>
        <div class="team-member small">
            <img src="Staff Pic/4. Farisah.png">
            <h4>Nur Farisah binti Jafrin</h4>
            <p>Website Developer</p>
        </div>
        <div class="team-member small">
            <img src="Staff Pic/5. Ros.png">
            <h4>Nur Ros Amalin binti Azmi</h4>
            <p>Website Developer</p>
        </div>
        <div class="team-member small">
            <img src="Staff Pic/6. Wan.png">
            <h4>Wan Nur Syafiqah binti Wan Mohd Zailani</h4>
            <p>Website Developer</p>
        </div>
    </div>
</div>

<!-- E-RESOURCE -->
<div class="team-section">
    <div class="team-photo">
        <img src="Staff Pic/E-Resource.png" alt="E-Resource Team">
    </div>
    <div class="staff-vertical">
        <div class="team-member small">
            <img src="Staff Pic/7. Sarah.png">
            <h4>Hanis Sarah binti Burhanudin</h4>
            <p>E-Resource Manager</p>
        </div>
        <div class="team-member small">
            <img src="Staff Pic/8. Aisyah.png">
            <h4>Siti Aisyah binti Abdul Azis</h4>
            <p>E-Resource Developer</p>
        </div>
    </div>
</div>

<!-- DESIGN -->
<div class="team-section">
    <div class="team-photo">
        <img src="Staff Pic/Design.png" alt="Design Team">
    </div>
    <div class="staff-vertical">
        <div class="team-member small">
            <img src="Staff Pic/9. Fatin.png">
            <h4>Fatin Nuraisyah binti Mislaini</h4>
            <p>Head Designer</p>
        </div>
        <div class="team-member small">
            <img src="Staff Pic/10. Hashirah.png">
            <h4>Nurhashirah binti Borhan</h4>
            <p>Assistant Designer</p>
        </div>
    </div>
</div>

</div>
</section>

    <!-- ================= CHATBOT - HYBRID VERSION (FREE & RELIABLE) ================= -->
<!-- Place this code in any HTML page, right before closing </body> tag -->

<!-- CHATBOT STYLES -->
<style>
/* =========================
   CHATBOT (DRAGGABLE & RESIZABLE)
   ========================= */

/* Floating chat button */
.floating-icon {
    position: fixed;
    bottom: 30px;
    right: 30px;
    width: 60px;
    height: 60px;
    background-color: #86cfff;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: move;
    z-index: 999;
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.25);
    transition: transform 0.3s ease;
    user-select: none;
}

.floating-icon:hover {
    transform: scale(1.08);
}

.floating-icon.dragging {
    cursor: grabbing;
    transform: scale(1.1);
}

/* Chat window */
.chat-card {
    position: fixed;
    bottom: 100px;
    right: 30px;
    width: 340px;
    height: 480px;
    min-width: 280px;
    min-height: 350px;
    max-width: 600px;
    max-height: 80vh;
    background-color: #fefcef;
    border-radius: 16px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.35);
    display: flex;
    flex-direction: column;
    overflow: hidden;
    opacity: 0;
    pointer-events: none;
    transform: translateY(20px);
    transition: opacity 0.3s ease, transform 0.3s ease;
    z-index: 1000;
    resize: both;
}

.chat-card.dragging {
    cursor: grabbing;
}

/* Active (opened) state */
.chat-card.active {
    opacity: 1;
    pointer-events: auto;
    transform: translateY(0);
}

/* Header */
.chat-card .header {
    background-color: #86cfff;
    padding: 12px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    cursor: move;
    user-select: none;
}

.chat-card .header:active {
    cursor: grabbing;
}

.header-content {
    display: flex;
    align-items: center;
    gap: 10px;
}

.avatar {
    width: 38px;
    height: 38px;
    background-color: #999ae8;
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
}

.header-info h2 {
    font-size: 16px;
    margin: 0;
    color: #000435;
}

.header-info p {
    font-size: 12px;
    margin: 0;
    color: #000435;
}

.close-btn {
    background: none;
    border: none;
    font-size: 22px;
    cursor: pointer;
    color: #000435;
}

/* Chat body */
.chat-body {
    flex: 1;
    padding: 12px;
    overflow-y: auto;
    background-color: #f0e29a;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

/* Messages */
.msg {
    max-width: 80%;
    padding: 10px 14px;
    border-radius: 14px;
    font-size: 14px;
    line-height: 1.4;
    word-wrap: break-word;
}

.msg.bot {
    background-color: #86cfff;
    align-self: flex-start;
}

.msg.user {
    background-color: #999ae8;
    color: white;
    align-self: flex-end;
}

/* Footer input */
.chat-card .footer {
    display: flex;
    padding: 10px;
    gap: 8px;
    background-color: #fefcef;
    border-top: 2px solid rgba(0, 4, 53, 0.2);
}

.chat-card input {
    flex: 1;
    padding: 8px 12px;
    border-radius: 20px;
    border: 2px solid #7e212a;
    outline: none;
}

.send-btn {
    background-color: #7e212a;
    color: white;
    border: none;
    border-radius: 20px;
    padding: 8px 14px;
    cursor: pointer;
    font-weight: bold;
}

/* Resize handle indicator */
.chat-card::after {
    content: 'â‹°';
    position: absolute;
    bottom: 2px;
    right: 2px;
    font-size: 16px;
    color: #999;
    pointer-events: none;
}

/* Mobile adjustments */
@media screen and (max-width: 500px) {
    .chat-card {
        width: calc(100% - 30px);
        right: 15px;
        bottom: 100px;
        max-height: 70vh;
    }

    .floating-icon {
        right: 15px;
        bottom: 30px;
    }
}
</style>

<!-- CHATBOT STYLES -->
<style>
/* Floating chat button */
.floating-icon {
    position: fixed;
    bottom: 80px;
    right: 30px;
    width: 60px;
    height: 60px;
    background-color: #86cfff;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: move;
    z-index: 999;
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.25);
    transition: transform 0.3s ease;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
    touch-action: none;
}

.floating-icon:hover {
    transform: scale(1.08);
}

.floating-icon.dragging {
    cursor: grabbing;
    transform: scale(1.1);
}

/* Chat window */
.chat-card {
    position: fixed;
    bottom: 150px;
    right: 30px;
    width: 340px;
    height: 480px;
    min-width: 280px;
    min-height: 350px;
    max-width: 600px;
    max-height: 80vh;
    background-color: #fefcef;
    border-radius: 16px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.35);
    display: flex;
    flex-direction: column;
    overflow: hidden;
    opacity: 0;
    pointer-events: none;
    transform: translateY(20px);
    transition: opacity 0.3s ease, transform 0.3s ease;
    z-index: 1000;
    resize: both;
}

.chat-card.dragging {
    cursor: grabbing;
}

.chat-card.active {
    opacity: 1;
    pointer-events: auto;
    transform: translateY(0);
}

.chat-card .header {
    background-color: #86cfff;
    padding: 12px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    cursor: move;
    user-select: none;
}

.chat-card .header:active {
    cursor: grabbing;
}

.header-content {
    display: flex;
    align-items: center;
    gap: 10px;
}

.avatar {
    width: 38px;
    height: 38px;
    background-color: #999ae8;
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
}

.header-info h2 {
    font-size: 16px;
    margin: 0;
    color: #000435;
}

.header-info p {
    font-size: 12px;
    margin: 0;
    color: #000435;
}

.close-btn {
    background: none;
    border: none;
    font-size: 22px;
    cursor: pointer;
    color: #000435;
}

.chat-body {
    flex: 1;
    padding: 12px;
    overflow-y: auto;
    background-color: #f0e29a;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.msg {
    max-width: 80%;
    padding: 10px 14px;
    border-radius: 14px;
    font-size: 14px;
    line-height: 1.4;
    word-wrap: break-word;
}

.msg.bot {
    background-color: #86cfff;
    align-self: flex-start;
}

.msg.user {
    background-color: #999ae8;
    color: white;
    align-self: flex-end;
}

.chat-card .footer {
    display: flex;
    padding: 10px;
    gap: 8px;
    background-color: #fefcef;
    border-top: 2px solid rgba(0, 4, 53, 0.2);
}

.chat-card input {
    flex: 1;
    padding: 8px 12px;
    border-radius: 20px;
    border: 2px solid #7e212a;
    outline: none;
}

.send-btn {
    background-color: #7e212a;
    color: white;
    border: none;
    border-radius: 20px;
    padding: 8px 14px;
    cursor: pointer;
    font-weight: bold;
}

.chat-card::after {
    content: 'â‹°';
    position: absolute;
    bottom: 2px;
    right: 2px;
    font-size: 16px;
    color: #999;
    pointer-events: none;
}

@media screen and (max-width: 500px) {
    .chat-card {
        width: calc(100% - 30px);
        right: 15px;
        bottom: 100px;
        max-height: 70vh;
    }
    .floating-icon {
        right: 15px;
        bottom: 30px;
    }
}
</style>

<!-- CHATBOT HTML -->
<div class="chat-card" id="chatWindow" aria-hidden="true">
    <div class="header" id="chatHeader">
        <div class="header-content">
            <div class="avatar">ðŸ¤–</div>
            <div class="header-info">
                <h2>Chat Support</h2>
                <p>Hi, I'm Sam. How can I help you?</p>
            </div>
        </div>
        <button class="close-btn" onclick="toggleChat()">Ã—</button>
    </div>

    <div class="chat-body" id="chatBody">
        <div class="msg bot">Hello! I'm Sam, your AI assistant for The Traveller's Library. I can help you with information about our services, collections, and resources. What would you like to know?</div>
    </div>

    <div class="footer">
        <input type="text" id="userInput" placeholder="Type a message..." autocomplete="off">
        <button class="send-btn" onclick="sendMessage()">Send</button>
    </div>
</div>

<!-- FLOATING CHAT ICON (NOTE: NO onclick attribute) -->
<div class="floating-icon" id="chatIcon" aria-label="Open chat">
    <svg width="35" height="35" viewBox="0 0 24 24" fill="white">
        <path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"/>
        <circle cx="8" cy="9" r="1.5" fill="#86CFFF"/>
        <circle cx="12" cy="9" r="1.5" fill="#86CFFF"/>
        <circle cx="16" cy="9" r="1.5" fill="#86CFFF"/>
    </svg>
</div>

<!-- CHATBOT JAVASCRIPT -->
<script>
/* CHATBOT FUNCTIONALITY */

const LIBRARY_CONTEXT = `You are Sam, a helpful AI assistant for The Traveller's Library.

ABOUT THE TRAVELLER'S LIBRARY:
The Traveller's Library is a specialized library in Malaysia focused on tourism, hospitality, and travel-related resources. Our mission is "Guiding Pathways to Tourism Knowledge." We serve students, researchers, and professionals in the tourism industry.

OUR SERVICES:
1. OPAC (Online Public Access Catalog) - http://10.145.112.43:8081
2. E-Resources - https://fliphtml5.com/bookcase/mrqbd/
3. Institutional Repository - http://10.125.129.122
4. Useful Links - Curated external tourism resources

CONTACT INFORMATION:
Email: searah2024@gmail.com
Facebook: https://www.facebook.com/share/181qiN9eAF/?mibextid=wwXIfr
Instagram: @travellers_library (https://www.instagram.com/travellers_library)

Always be concise, helpful, and include relevant URLs when directing users.`;

const KNOWLEDGE_BASE = {
    about: {
        keywords: ['what is', 'about', 'tell me about', 'describe', 'explain', 'who are you', 'library', 'mission', 'purpose'],
        responses: [
            "The Traveller's Library is a specialized library focused on tourism, hospitality, and travel resources in Malaysia. Our mission is 'Guiding Pathways to Tourism Knowledge.' We serve students, researchers, and tourism professionals.",
            "We're The Traveller's Library - your gateway to tourism knowledge! We specialize in tourism, hospitality, and travel information, offering physical books via OPAC, digital resources through E-Resources, and academic papers in our Institutional Repository."
        ]
    },
    services: {
        keywords: ['service', 'offer', 'provide', 'available', 'what can', 'features', 'facilities'],
        responses: [
            "We offer 4 main services: OPAC (http://10.145.112.43:8081), E-Resources (https://fliphtml5.com/bookcase/mrqbd/), Institutional Repository (http://10.125.129.122), and Useful Links.",
            "Our library provides comprehensive services: OPAC for searching our physical catalog, E-Resources for digital books available anytime, an Institutional Repository for academic research, and Useful Links for external tourism resources."
        ]
    },
    opac: {
        keywords: ['opac', 'book', 'catalog', 'catalogue', 'physical', 'borrow', 'search book'],
        responses: [
            "Search for books using our OPAC at http://10.145.112.43:8081. Browse physical books, journals, and tourism resources easily!",
            "Our OPAC (http://10.145.112.43:8081) lets you discover all physical books and materials on tourism, hospitality, and travel. Search by title, author, or subject."
        ]
    },
    eresources: {
        keywords: ['ebook', 'e-book', 'digital', 'online book', 'electronic', 'pdf', 'download'],
        responses: [
            "Access our E-Resources collection 24/7 at https://fliphtml5.com/bookcase/mrqbd/ with digital books on tourism and hospitality.",
            "Our digital library is available at https://fliphtml5.com/bookcase/mrqbd/ for e-books on tourism, hospitality, and travel."
        ]
    },
    repository: {
        keywords: ['repository', 'research', 'paper', 'thesis', 'dissertation', 'academic', 'publication'],
        responses: [
            "Visit our Institutional Repository at http://10.125.129.122 for research papers, theses, and dissertations focused on tourism.",
            "Our Institutional Repository (http://10.125.129.122) archives scholarly publications, research papers, and academic theses related to tourism and hospitality."
        ]
    },
    links: {
        keywords: ['useful link', 'external', 'website', 'other resource', 'link'],
        responses: [
            "Our Useful Links section provides curated external tourism resources including industry websites, databases, and research tools.",
            "We maintain a collection of Useful Links to external tourism resources - databases, industry websites, and government resources."
        ]
    },
    contact: {
        keywords: ['contact', 'email', 'reach', 'get in touch', 'message', 'facebook', 'instagram'],
        responses: [
            "Contact us: Email: searah2024@gmail.com | Facebook: https://www.facebook.com/share/181qiN9eAF | Instagram: @travellers_library",
            "Get in touch: Email: searah2024@gmail.com | Facebook: https://www.facebook.com/share/181qiN9eAF | Instagram: https://www.instagram.com/travellers_library"
        ]
    },
    greeting: {
        keywords: ['hello', 'hi', 'hey', 'good morning', 'good afternoon', 'good evening'],
        responses: [
            "Hello! ðŸ‘‹ I'm Sam, your assistant at The Traveller's Library. How can I help you today?",
            "Hi there! Welcome to The Traveller's Library! I'm Sam, your AI guide."
        ]
    },
    thanks: {
        keywords: ['thank', 'thanks', 'appreciate'],
        responses: [
            "You're welcome! ðŸ˜Š Let me know if you need more help with our resources.",
            "Glad to help! Enjoy exploring The Traveller's Library."
        ]
    },
    goodbye: {
        keywords: ['bye', 'goodbye', 'see you', 'later', 'take care'],
        responses: [
            "Goodbye! ðŸ‘‹ Come back anytime you need help with The Traveller's Library resources.",
            "Take care! Visit us again soon."
        ]
    }
};

function findFallbackResponse(userText) {
    const text = userText.toLowerCase();
    let bestMatch = null;
    let maxMatches = 0;

    for (const [category, data] of Object.entries(KNOWLEDGE_BASE)) {
        let matches = 0;
        for (const keyword of data.keywords) {
            if (text.includes(keyword)) matches++;
        }
        if (matches > maxMatches) {
            maxMatches = matches;
            bestMatch = category;
        }
    }

    if (bestMatch && maxMatches > 0) {
        const responses = KNOWLEDGE_BASE[bestMatch].responses;
        return responses[Math.floor(Math.random() * responses.length)];
    }
    return null;
}

async function getAIResponse(userText) {
    try {
        const prompt = `${LIBRARY_CONTEXT}\n\nUser question: ${userText}\n\nRespond as Sam in 2-4 sentences:`;
        const response = await fetch("https://api-inference.huggingface.co/models/microsoft/DialoGPT-large", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ inputs: prompt, parameters: { max_length: 200, temperature: 0.7, return_full_text: false } })
        });
        if (response.ok) {
            const data = await response.json();
            if (data && data[0] && data[0].generated_text) return data[0].generated_text.trim();
        }
    } catch (error) {
        console.log("AI service unavailable, using fallback:", error);
    }
    return null;
}

// ========== IMPROVED DRAGGABLE ICON WITH TOUCH SUPPORT ==========
let iconDragging = false;
let iconOffsetX = 0, iconOffsetY = 0, touchStartTime = 0;
let iconTouchMoved = false;
const floatingIcon = document.getElementById('chatIcon');

// Mouse events
floatingIcon.addEventListener('mousedown', function(e) {
    if (e.button === 2) return;
    iconDragging = true;
    floatingIcon.classList.add('dragging');
    iconOffsetX = e.clientX - floatingIcon.getBoundingClientRect().left;
    iconOffsetY = e.clientY - floatingIcon.getBoundingClientRect().top;
    e.preventDefault();
});

document.addEventListener('mousemove', function(e) {
    if (iconDragging) {
        const x = e.clientX - iconOffsetX;
        const y = e.clientY - iconOffsetY;
        floatingIcon.style.left = Math.max(0, Math.min(x, window.innerWidth - floatingIcon.offsetWidth)) + 'px';
        floatingIcon.style.top = Math.max(0, Math.min(y, window.innerHeight - floatingIcon.offsetHeight)) + 'px';
        floatingIcon.style.right = 'auto';
        floatingIcon.style.bottom = 'auto';
    }
});

document.addEventListener('mouseup', function() { 
    if (iconDragging) { 
        iconDragging = false; 
        floatingIcon.classList.remove('dragging'); 
    } 
});

floatingIcon.addEventListener('click', function(e) {
    if (!iconDragging) {
        toggleChat();
    }
});

// Touch events (IMPROVED)
floatingIcon.addEventListener('touchstart', function(e) {
    if (e.touches.length === 1) {
        const touch = e.touches[0];
        iconOffsetX = touch.clientX - floatingIcon.getBoundingClientRect().left;
        iconOffsetY = touch.clientY - floatingIcon.getBoundingClientRect().top;
        iconTouchMoved = false;
        touchStartTime = Date.now();
        e.preventDefault();
    }
}, { passive: false });

floatingIcon.addEventListener('touchmove', function(e) {
    if (e.touches.length === 1) {
        iconTouchMoved = true;
        const touch = e.touches[0];
        const x = touch.clientX - iconOffsetX;
        const y = touch.clientY - iconOffsetY;
        floatingIcon.style.left = Math.max(0, Math.min(x, window.innerWidth - floatingIcon.offsetWidth)) + 'px';
        floatingIcon.style.top = Math.max(0, Math.min(y, window.innerHeight - floatingIcon.offsetHeight)) + 'px';
        floatingIcon.style.right = 'auto';
        floatingIcon.style.bottom = 'auto';
        e.preventDefault();
    }
}, { passive: false });

floatingIcon.addEventListener('touchend', function(e) {
    const touchDuration = Date.now() - touchStartTime;
    if (!iconTouchMoved && touchDuration < 300) {
        toggleChat();
    }
    e.preventDefault();
}, { passive: false });

// ========== DRAGGABLE CHAT WINDOW ==========
let chatDragging = false, chatOffsetX = 0, chatOffsetY = 0;
const chatWindow = document.getElementById('chatWindow');
const chatHeader = document.getElementById('chatHeader');

chatHeader.addEventListener('mousedown', function(e) {
    if (e.target.classList.contains('close-btn')) return;
    chatDragging = true;
    chatWindow.classList.add('dragging');
    chatOffsetX = e.clientX - chatWindow.getBoundingClientRect().left;
    chatOffsetY = e.clientY - chatWindow.getBoundingClientRect().top;
    e.preventDefault();
});

document.addEventListener('mousemove', function(e) {
    if (chatDragging) {
        const x = e.clientX - chatOffsetX;
        const y = e.clientY - chatOffsetY;
        chatWindow.style.left = Math.max(0, Math.min(x, window.innerWidth - chatWindow.offsetWidth)) + 'px';
        chatWindow.style.top = Math.max(0, Math.min(y, window.innerHeight - chatWindow.offsetHeight)) + 'px';
        chatWindow.style.right = 'auto';
        chatWindow.style.bottom = 'auto';
    }
});

document.addEventListener('mouseup', function() { 
    if (chatDragging) { 
        chatDragging = false; 
        chatWindow.classList.remove('dragging'); 
    } 
});

chatHeader.addEventListener('touchstart', function(e) {
    if (e.target.classList.contains('close-btn')) return;
    if (e.touches.length === 1) {
        const touch = e.touches[0];
        chatDragging = true;
        chatOffsetX = touch.clientX - chatWindow.getBoundingClientRect().left;
        chatOffsetY = touch.clientY - chatWindow.getBoundingClientRect().top;
    }
});

chatHeader.addEventListener('touchmove', function(e) {
    if (chatDragging && e.touches.length === 1) {
        const touch = e.touches[0];
        const x = touch.clientX - chatOffsetX;
        const y = touch.clientY - chatOffsetY;
        chatWindow.style.left = Math.max(0, Math.min(x, window.innerWidth - chatWindow.offsetWidth)) + 'px';
        chatWindow.style.top = Math.max(0, Math.min(y, window.innerHeight - chatWindow.offsetHeight)) + 'px';
    }
});

chatHeader.addEventListener('touchend', function() { 
    chatDragging = false; 
});

// ========== CHAT FUNCTIONS ==========
function toggleChat() {
    const chatWindow = document.getElementById('chatWindow');
    chatWindow.classList.toggle('active');
    chatWindow.setAttribute('aria-hidden', !chatWindow.classList.contains('active'));
}

async function sendMessage() {
    const input = document.getElementById('userInput');
    const chatBody = document.getElementById('chatBody');
    const userText = input.value.trim();
    if (!userText) return;

    const userDiv = document.createElement('div');
    userDiv.className = 'msg user';
    userDiv.textContent = userText;
    chatBody.appendChild(userDiv);
    input.value = '';
    chatBody.scrollTop = chatBody.scrollHeight;

    const botDiv = document.createElement('div');
    botDiv.className = 'msg bot';
    botDiv.textContent = "Sam is typing...";
    chatBody.appendChild(botDiv);
    chatBody.scrollTop = chatBody.scrollHeight;

    const fallback = findFallbackResponse(userText);
    if (fallback) {
        setTimeout(() => { 
            botDiv.textContent = fallback; 
            chatBody.scrollTop = chatBody.scrollHeight; 
        }, 300);
    } else {
        const aiResp = await getAIResponse(userText);
        setTimeout(() => {
            botDiv.textContent = (aiResp && aiResp.length > 10) ? aiResp : 
                "I'm here to help with The Traveller's Library! Ask me about services, resources, or contact info.";
            chatBody.scrollTop = chatBody.scrollHeight;
        }, 500);
    }
}

document.addEventListener("DOMContentLoaded", () => {
    const input = document.getElementById("userInput");
    if (input) input.addEventListener("keypress", e => { if (e.key === "Enter") sendMessage(); });
});
</script>





<footer>
    <div class="footer-container">

        <div class="footer-left">
            Â© The Traveller's Library, 2026. This library portal is to complete a group project under IML625.
        </div>

 <a href="https://www.freecounterstat.com" title="visitors counter"><img src="https://counter1.optistats.ovh/private/freecounterstat.php?c=5s3ct8llmes886ydn3b3tu4n39cdpfq2" 
                border="0" title="visitors counter" alt="visitors counter"></a>


        <div class="footer-right">
                <a href="https://www.facebook.com/share/181qiN9eAF/?mibextid=wwXIfr" target="_blank"><img src="../../Index Visuals/Footer/SocMed Logo/Facebook Logo.png" alt="Facebook" /></a>
                <a href="https://www.instagram.com/travellers_library?igsh=ajk1NGNwa2ZhZjgz&utm_source=qr" target="_blank"><img src="../../Index Visuals/Footer/SocMed Logo/Instagram Logo.jfif" alt="Instagram" /></a>
                <a href="mailto:searah2024@gmail.com"><img src="../../Index Visuals/Footer/SocMed Logo/Gmail.jfif" alt="Gmail" /></a>
                <a href="#navbar"><img src="../../Index Visuals/Footer/Top Arrow.webp" id="footerimg" alt="Back to top" /></a>
            </div>

    </div>
</footer>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const accordions = document.querySelectorAll('.accordion');

    accordions.forEach(acc => {
        acc.addEventListener('click', () => {
            const content = acc.nextElementSibling;
            const arrow = acc.querySelector('.arrow');

            if (content.style.maxHeight) {
                // Close accordion
                content.style.maxHeight = null;
                content.style.paddingTop = '0';
                content.style.paddingBottom = '0';
                arrow.innerHTML = '&#9662;'; // down arrow
            } else {
                // Open accordion
                content.style.maxHeight = content.scrollHeight + 'px';
                content.style.paddingTop = '10px';
                content.style.paddingBottom = '10px';
                arrow.innerHTML = '&#9652;'; // up arrow
            }
        });
    });
});
</script>



</body>
</html>
